<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0">
    <title>Contact Us</title>
    <link rel="shortcut icon" href="images/index.ico" type="image/x-icon">

    <!-- CSS: Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- CSS: Bootstrap v-5.3 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>
        body {
            color: white;
            background: url('https://img.freepik.com/free-photo/blur-coffee-cafe-shop-restaurant-with-bokeh-background_1421-472.jpg?w=826&t=st=1699874131~exp=1699874731~hmac=809519f966faa59d399db71a1fd81d722ee9441a5b0ffd778235fcd9929fff21');
        }

        #pp {
            position: absolute;
            right: 300px;
        }

        .lable1 {
            position: absolute;
            right: 500px;
            top: 5px;
            font-size: xx-large;

        }

        #ppe {
            position: absolute;
            left: 250px;
            top: 50px;


        }

        .lable2 {
            position: absolute;
            right: 550px;
            top: 150px;
            font-size: xx-large;

        }

        #ee {
            position: absolute;
            right: 550px;
            top: 160px;

        }

        .lable3 {
            position: absolute;
            right: 150px;
            top: 35px;
            font-size: xx-large;

        }

        .mt-3 {
            position: absolute;
            right: 400px;
            top: 100px;
            background-color: blue;
            color: white;

        }

        
    </style>
</head>

<body>
    <!-- space -->
    <div class="py-lg-5 py-md-4 py-sm-3 py-2"></div>
    <div class="row justify-content-center pt-5">
        <div class="col-lg-7 col-md-10">
            <h3 class="fw-normal text-center mb-5 border-bottom pb-2">REGISTER PAGE</h3>
            <form class="form_overlay" method="POST" accept-charset="UTF-8" autocomplete="off" name="contact">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="input_overlay">
                            <label for="fname" class="lable">Enter your first name</label>
                            <input type="text" name="first_name" class="form-control" required autocomplete="off">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="input_overlay">
                            <label for="lname" class="lable">Enter your last name</label>
                            <input type="text" name="last_name" class="form-control" required autocomplete="off">


                            <form class="form_overlay" method="POST" accept-charset="UTF-8" autocomplete="off"
                                name="contact">
                                <div class="row g-4">
                                    <div class="col-lg-6">
                                        <div class="input_overlay">
                                            <label for="ee" class="lable2">EMail:</label>
                                            <input type="text" name="email" id="ppe" required autocomplete="off">
                                            <p id="emailError" style="color: red;"></p>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="input_overlay">
                                            <label for="ppe" class="lable3">PhoneNumber:</label>
                                            <input type="text" name="phone" id="ee" required autocomplete="off">
                                            <p id="phoneError" style="color: red;"></p>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="input_overlay">
                                            <label for="pp" class="lable1">Password:</label>
                                            <input type="password" name="password" id="pp" required autocomplete="off">
                                            <p id="passwordError" style="color: red;"></p>
                                        </div>
                                    </div>
                                    <div class="col-12 text-end">
                                        <button type="submit" class="mt-3">Submit</button>
                                    </div>
                                    <p id="demo"></p>
                                </div>
                            </form>
                        </div>
                    </div>

                    <script>
                        function myalert() {
                            alert("If E-mail, Password, or phone number is wrong, we will show Invalid in all three formats.");
                        }
                        function myalert1() {
                            alert("Please enter Countrycode before Phone Number");
                        }

                        function validateForm() {
                            const emailInput = document.getElementById('ee').value;
                            const phoneInput = document.getElementById('ppe').value;
                            const pass = document.getElementById('pp').value;
                            const validationResultElement = document.getElementById('emailError');
                            const validationResultElement1 = document.getElementById('phoneError');
                            const validationResultElement2 = document.getElementById('passwordError');
                            const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
                            const phoneRegex = /^\d{12}$/;
                            const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/;
                            const isValidPhone = phoneRegex.test(phoneInput);
                            const isValidEmail = emailRegex.test(emailInput);
                            const isValidPassword = passwordRegex.test(pass);

                            if (isValidEmail && isValidPhone && isValidPassword) {
                                validationResultElement.textContent = ''; // Clear any previous error messages
                                validationResultElement1.textContent = '';
                                validationResultElement2.textContent = '';

                                // Submit the form data
                                const scriptURL = 'https://script.google.com/macros/s/AKfycbwfyM6zgA117phMm4vNZKSZcQBjQAgy0qgySpX6JuCA2ioeY-FAFnp3-xFmCIvQgXviZw/exec';
                                const formData = new FormData(form);

                                fetch(scriptURL, { method: 'POST', body: formData })
                                    .then(response => {
                                        document.getElementById("demo").innerHTML = "<div class='alert alert-primary' role='alert'><b>Thank You for Registering!</b></div>";
                                        form.reset();
                                        setTimeout(function () {
                                            window.location.href = 'Signin.html';
                                        }, 1000);
                                    })
                                    .catch(error => console.error('Error!', error.message));
                            } else {
                                validationResultElement.textContent = 'Invalid email address.';
                                validationResultElement1.textContent = 'Invalid phone number.';
                                validationResultElement2.textContent = 'Invalid Password. Please use a minimum of 8 characters. Try to use symbols like @, #, etc. Also, use uppercase, lowercase, and numbers to make your password strong.';
                                myalert();
                                myalert1();
                            }
                        }

                        const form = document.forms['contact'];
                        form.addEventListener('submit', (e) => {
                            e.preventDefault();

                            validateForm();
                        });
                    </script>
</body>

</html>
